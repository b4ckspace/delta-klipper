# This file contains common pin mappings for RADDS (v1.5) boards.  To
# use this config, the firmware should be compiled for the Arduino
# Due.

# See docs/Config_Reference.md for a description of parameters.

# Temp sensor pins: PA16..PA6
# Mosfet Pins: PC23 (Heatbed), PC22, PC21, PD7, PD8, PB27

[stepper_a]
step_pin: PA15
dir_pin: PA14
enable_pin: PD1
microsteps: 16
rotation_distance: 10
#endstop_pin: ^PD3 # min
endstop_pin: ^PC2 # max
homing_speed: 50
#position_endstop: 479.00
#arm_length: 380

[stepper_b]
step_pin: PA12
dir_pin: PA13
enable_pin: PB26
microsteps: 16
rotation_distance: 10
#endstop_pin: ^PD9 # min
endstop_pin: ^PC4 # max

[stepper_c]
step_pin: PB25
dir_pin: PC28
enable_pin: PD5
microsteps: 16
rotation_distance: 10
#endstop_pin: ^PD10 # min
endstop_pin: ^PC6 # max

[extruder]
step_pin: PA2
dir_pin: PA3
enable_pin: PB17
microsteps: 16
rotation_distance: 8.073
nozzle_diameter: 0.400
filament_diameter: 1.750
heater_pin: PB27
#sensor_type: EPCOS 100K B57560G104F
sensor_type: Generic 3950
sensor_pin: PA16
#control: pid
#pid_Kp: 22.2
#pid_Ki: 1.08
#pid_Kd: 114
min_temp: 0
max_temp: 270
smooth_time: 1.0
max_extrude_only_distance: 1000
# this seems to cause extrusion issues: pressure_advance: 0.48
pressure_advance: 0.2
max_extrude_cross_section: 5

[heater_bed]
heater_pin: PC23
sensor_type: EPCOS 100K B57560G104F
sensor_pin: PA6
#control: watermark
min_temp: 0
max_temp: 90
smooth_time: 1.0

[fan]
pin: PC21

[heater_fan heatbreak_cooling_fan]
pin: PC22

[mcu]
serial: /dev/serial/by-id/usb-Klipper_sam3x8e_20322051525051532038303037303133-if00
#serial: /dev/ttyACM0

[printer]
kinematics: delta
max_velocity: 500
#max_accel: 6000
square_corner_velocity: 10
max_accel: 10000
max_accel_to_decel: 5000
max_z_velocity: 150
max_z_accel: 100
#delta_radius: 210
print_radius: 200

# only for manual calibaration
minimum_z_position: -2

[idle_timeout]
gcode:
  TURN_OFF_HEATERS
  M84
  POWER_OFF_PRINTER
timeout: 600

[delta_calibrate]
radius: 95

[display]
lcd_type: hd44780
rs_pin: PA19
e_pin: PA20
d4_pin: PC19
d5_pin: PC18
d6_pin: PC17
d7_pin: PC16
encoder_pins: ^PB21, ^PC13
click_pin: ^!PC15

[mcu rpi]
serial: /tmp/klipper_host_mcu

[adxl345]
cs_pin: rpi:None

[probe]
pin: ^!PD3
z_offset: -0.09
speed: 7
sample_retract_dist: 20

[bed_mesh]
speed: 100
mesh_min: -60, -60
mesh_max: 60, 60
probe_count: 5, 5
horizontal_move_z: 5

[resonance_tester]
accel_chip: adxl345
probe_points:
     0, 0, 20

[exclude_object]

[include mainsail.cfg]
[include macros.cfg]

#*# <---------------------- SAVE_CONFIG ---------------------->
#*# DO NOT EDIT THIS BLOCK OR BELOW. The contents are auto-generated.
#*#
#*# [printer]
#*# delta_radius = 206.508563
#*#
#*# [stepper_a]
#*# angle = 210.210852
#*# arm_length = 377.184345
#*# position_endstop = 462.554179
#*#
#*# [stepper_b]
#*# angle = 330.847053
#*# arm_length = 373.170121
#*# position_endstop = 463.791927
#*#
#*# [stepper_c]
#*# angle = 90.000000
#*# arm_length = 374.149220
#*# position_endstop = 464.053424
#*#
#*# [input_shaper]
#*# shaper_type_x = ei
#*# shaper_freq_x = 52.4
#*# shaper_type_y = mzv
#*# shaper_freq_y = 46.2
#*#
#*# [extruder]
#*# control = pid
#*# pid_kp = 34.291
#*# pid_ki = 9.939
#*# pid_kd = 29.576
#*#
#*# [heater_bed]
#*# control = pid
#*# pid_kp = 72.361
#*# pid_ki = 1.304
#*# pid_kd = 1004.004
#*#
#*# [bed_mesh default]
#*# version = 1
#*# points =
#*# 	  -0.047109, -0.121702, -0.127360, -0.098438, -0.015335
#*# 	  -0.055937, -0.105797, -0.118840, -0.092431, -0.005374
#*# 	  -0.055958, -0.086869, -0.087765, -0.077797, 0.007596
#*# 	  -0.033083, -0.077795, -0.098822, -0.106031, -0.032710
#*# 	  -0.069078, -0.117443, -0.139295, -0.127205, -0.078113
#*# x_count = 5
#*# y_count = 5
#*# mesh_x_pps = 2
#*# mesh_y_pps = 2
#*# algo = lagrange
#*# tension = 0.2
#*# min_x = -60.0
#*# max_x = 60.0
#*# min_y = -60.0
#*# max_y = 60.0
#*#
#*# [delta_calibrate]
#*# height0 = -0.09
#*# height0_pos = 148187.000,148224.000,148565.000
#*# height1 = -0.09
#*# height1_pos = 162823.000,162865.000,134607.000
#*# height2 = -0.09
#*# height2_pos = 142992.000,173072.000,143366.000
#*# height3 = -0.09
#*# height3_pos = 135342.000,161044.000,161287.000
#*# height4 = -0.09
#*# height4_pos = 143643.000,143721.000,166620.000
#*# height5 = -0.09
#*# height5_pos = 158865.000,136458.000,159339.000
#*# height6 = -0.09
#*# height6_pos = 169281.000,143179.000,143632.000
#*# distance0 = 64.89999999999999
#*# distance0_pos1 = 147114.155,148731.500,149141.859
#*# distance0_pos2 = 136595.995,158760.793,159088.936
#*# distance1 = 65.1
#*# distance1_pos1 = 147585.993,147780.087,149624.525
#*# distance1_pos2 = 143392.146,143622.436,167782.521
#*# distance2 = 65.10000000000001
#*# distance2_pos1 = 148527.508,147297.763,149141.859
#*# distance2_pos2 = 158349.732,136682.071,159088.936
#*# distance3 = 64.95
#*# distance3_pos1 = 148997.166,147760.036,148183.530
#*# distance3_pos2 = 166758.671,143325.463,143857.068
#*# distance4 = 64.85
#*# distance4_pos1 = 148518.711,148711.258,147707.800
#*# distance4_pos2 = 158199.293,158413.783,137022.512
#*# distance5 = 65.10000000000001
#*# distance5_pos1 = 147577.277,149200.463,148183.530
#*# distance5_pos2 = 143262.956,167193.219,143857.068
#*# distance6 = 65.14999999999999
#*# distance6_pos1 = 137472.615,156677.350,158584.928
#*# distance6_pos2 = 144153.257,143016.825,167006.132
#*# distance7 = 64.95
#*# distance7_pos1 = 144317.144,143174.875,165475.270
#*# distance7_pos2 = 158704.734,136965.587,157858.241
#*# distance8 = 65.0
#*# distance8_pos1 = 157846.547,137552.995,157001.896
#*# distance8_pos2 = 165997.415,144092.305,143257.910
#*# distance9 = 64.85000000000001
#*# distance9_pos1 = 164505.897,144271.362,143426.461
#*# distance9_pos2 = 156996.065,158788.615,137316.826
#*# distance10 = 64.8
#*# distance10_pos1 = 156163.165,157937.558,137907.814
#*# distance10_pos2 = 142677.867,166437.689,144630.204
#*# distance11 = 64.9
#*# distance11_pos1 = 142847.806,164922.996,144800.996
#*# distance11_pos2 = 136890.069,157538.796,159456.585
